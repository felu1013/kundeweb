{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/luked/Documents/kundeweb/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n\nvar _UpdateKundeComponent_instances, _UpdateKundeComponent_setProps, _UpdateKundeComponent_handleFindError, _UpdateKundeComponent_handleUpdateResult, _UpdateKundeComponent_navigateHome;\n\nimport { __classPrivateFieldGet } from \"tslib\";\n/* eslint-disable @typescript-eslint/consistent-type-imports */\n\nimport { FindError, UpdateError } from '../shared';\n/* eslint-enable @typescript-eslint/consistent-type-imports */\n\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { first, tap } from 'rxjs/operators';\nimport { FormGroup } from '@angular/forms';\nimport log from 'loglevel';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared\";\nimport * as i2 from \"@angular/platform-browser\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../shared/error-message.component\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"./update-email.component\";\nimport * as i8 from \"./update-geschlecht.component\";\nimport * as i9 from \"./update-kategorie.component\";\nimport * as i10 from \"./update-nachname.component\";\n\nfunction UpdateKundeComponent_section_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"section\", 2)(1, \"h4\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 3)(4, \"form\", 4);\n    i0.ɵɵlistener(\"submit\", function UpdateKundeComponent_section_0_Template_form_submit_4_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onSubmit());\n    });\n    i0.ɵɵelement(5, \"hs-update-nachname\", 5)(6, \"hs-update-geschlecht\", 5)(7, \"hs-update-kategorie\", 5)(8, \"hs-update-email\", 5);\n    i0.ɵɵelementStart(9, \"div\", 6)(10, \"div\", 7)(11, \"button\", 8)(12, \"i\", 9);\n    i0.ɵɵtext(13, \"check\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"span\", 10);\n    i0.ɵɵtext(15, \"Stammdaten aktualisieren\");\n    i0.ɵɵelementEnd()()()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Kunde \", ctx_r0.kunde.id, \":\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.updateForm);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValue\", ctx_r0.kunde.nachname);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValue\", ctx_r0.kunde.geschlecht);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValue\", ctx_r0.kunde.kategorie);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"updateForm\", ctx_r0.updateForm)(\"currentValue\", ctx_r0.kunde.email);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r0.updateForm.pristine || ctx_r0.updateForm.invalid);\n  }\n}\n/**\r\n * Komponente für das Tag hs update kunde\r\n */\n\n\nexport class UpdateKundeComponent {\n  // eslint-disable-next-line max-params\n  constructor(service, readService, titleService, router, route) {\n    this.service = service;\n    this.readService = readService;\n    this.titleService = titleService;\n    this.router = router;\n    this.route = route;\n\n    _UpdateKundeComponent_instances.add(this);\n\n    this.updateForm = new FormGroup({});\n    log.debug('UpdateKundeComponent.constructor()');\n  }\n\n  ngOnInit() {\n    var _a;\n\n    const id = (_a = this.route.snapshot.paramMap.get('id')) !== null && _a !== void 0 ? _a : undefined;\n    this.readService.findById(id).pipe(first(), tap(result => {\n      __classPrivateFieldGet(this, _UpdateKundeComponent_instances, \"m\", _UpdateKundeComponent_setProps).call(this, result);\n\n      log.debug('UpdateKundeComponent.ngOnInit: kunde=', this.kunde);\n    })).subscribe();\n  }\n  /**\r\n   * Die aktuellen Stammdaten für das angezeigte Kunde Objekt zurückschreiben\r\n   * @return false, um das durch den Button Klick ausgelöste Ereignis zu konsumieren\r\n   */\n\n\n  onSubmit() {\n    if (this.updateForm.pristine || this.kunde === undefined) {\n      log.debug('UpdateKundeComponent.onSubmit: keine Aenderung');\n      return;\n    }\n\n    const {\n      nachname\n    } = this.updateForm.value;\n    const {\n      geschlecht\n    } = this.updateForm.value;\n    const {\n      kategorie\n    } = this.updateForm.value;\n    const {\n      email\n    } = this.updateForm.value;\n    const {\n      kunde,\n      service\n    } = this;\n    kunde.nachname = nachname;\n    kunde.geschlecht = geschlecht;\n    kunde.kategorie = kategorie;\n    kunde.email = email;\n    log.debug('UpdateKundeComponent.onSubmit: kunde=', kunde);\n    service.update(kunde).pipe(first(), tap(result => __classPrivateFieldGet(this, _UpdateKundeComponent_instances, \"m\", _UpdateKundeComponent_handleUpdateResult).call(this, result))).subscribe({\n      next: () => __classPrivateFieldGet(this, _UpdateKundeComponent_instances, \"m\", _UpdateKundeComponent_navigateHome).call(this)\n    });\n    return false;\n  }\n\n}\n_UpdateKundeComponent_instances = new WeakSet(), _UpdateKundeComponent_setProps = function _UpdateKundeComponent_setProps(result) {\n  if (result instanceof FindError) {\n    __classPrivateFieldGet(this, _UpdateKundeComponent_instances, \"m\", _UpdateKundeComponent_handleFindError).call(this, result);\n\n    return;\n  }\n\n  this.kunde = result;\n  this.errorMsg = undefined;\n  const titel = `Aktualisieren ${this.kunde.id}`;\n  this.titleService.setTitle(titel);\n}, _UpdateKundeComponent_handleFindError = function _UpdateKundeComponent_handleFindError(err) {\n  const {\n    statuscode\n  } = err;\n  log.debug('UpdateKundeComponent.#handleFindError: statuscode=', statuscode);\n  this.kunde = undefined;\n\n  switch (statuscode) {\n    case 404\n    /* NotFound */\n    :\n      this.errorMsg = 'Kein Kunde gefunden';\n      break;\n\n    case 429\n    /* TooManyRequests */\n    :\n      this.errorMsg = 'Zu viele Anfragen, bitte versuchen Sie es später erneut';\n      break;\n\n    case 504\n    /* GatewayTimeout */\n    :\n      this.errorMsg = 'Ein interner Fehler ist aufgetreten';\n      log.error('Laeuft der Appserver und Port Forwarding?');\n      break;\n\n    default:\n      this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten';\n      break;\n  }\n}, _UpdateKundeComponent_handleUpdateResult = function _UpdateKundeComponent_handleUpdateResult(result) {\n  if (!(result instanceof UpdateError)) {\n    return;\n  }\n\n  const {\n    statuscode\n  } = result;\n  log.debug('UpdateKundeComponent.#handleUpdateResult: statuscode=', statuscode);\n\n  switch (statuscode) {\n    case 422\n    /* UnprocessableEntity */\n    :\n      {\n        const {\n          cause\n        } = result; // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n\n        this.errorMsg = cause instanceof HttpErrorResponse ? cause.error : JSON.stringify(cause);\n        break;\n      }\n\n    case 429\n    /* TooManyRequests */\n    :\n      this.errorMsg = 'Zu viele Anfragen, bitte später versuchen';\n      break;\n\n    case 504\n    /* GatewayTimeout */\n    :\n      this.errorMsg = 'Interner Fehler';\n      log.error('Laeuft Appserver und Port Forwarding?');\n      break;\n\n    default:\n      this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten';\n      break;\n  }\n\n  log.debug('UpdateKundeComponent.#handleUpdateResult: errorMsg=', this.errorMsg);\n}, _UpdateKundeComponent_navigateHome = /*#__PURE__*/function () {\n  var _UpdateKundeComponent_navigateHome2 = _asyncToGenerator(function* () {\n    yield this.router.navigate(['/']);\n  });\n\n  function _UpdateKundeComponent_navigateHome() {\n    return _UpdateKundeComponent_navigateHome2.apply(this, arguments);\n  }\n\n  return _UpdateKundeComponent_navigateHome;\n}();\n\nUpdateKundeComponent.ɵfac = function UpdateKundeComponent_Factory(t) {\n  return new (t || UpdateKundeComponent)(i0.ɵɵdirectiveInject(i1.KundeWriteService), i0.ɵɵdirectiveInject(i1.KundeReadService), i0.ɵɵdirectiveInject(i2.Title), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\n\nUpdateKundeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UpdateKundeComponent,\n  selectors: [[\"hs-update-kunde\"]],\n  decls: 2,\n  vars: 2,\n  consts: [[\"class\", \"mt-1 ms-1\", 4, \"ngIf\"], [3, \"text\"], [1, \"mt-1\", \"ms-1\"], [1, \"mt-2\", \"ms-2\"], [\"role\", \"form\", 3, \"formGroup\", \"submit\"], [3, \"updateForm\", \"currentValue\"], [1, \"row\"], [1, \"col\", \"offset-2\", \"gy-3\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"material-icons\"], [1, \"ms-1\"]],\n  template: function UpdateKundeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, UpdateKundeComponent_section_0_Template, 16, 11, \"section\", 0);\n      i0.ɵɵelement(1, \"hs-error-message\", 1);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.kunde);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"text\", ctx.errorMsg);\n    }\n  },\n  dependencies: [i4.NgIf, i5.ErrorMessageComponent, i6.ɵNgNoValidate, i6.NgControlStatusGroup, i6.FormGroupDirective, i7.UpdateEmailComponent, i8.UpdateGeschlechtComponent, i9.UpdateKategorieComponent, i10.UpdateNachnameComponent],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"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","names":["FindError","UpdateError","HttpErrorResponse","first","tap","FormGroup","log","i0","ctx_r0","UpdateKundeComponent","constructor","service","readService","titleService","router","route","debug","ngOnInit","id","snapshot","paramMap","get","_a","undefined","findById","pipe","result","__classPrivateFieldGet","_UpdateKundeComponent_instances","_UpdateKundeComponent_setProps","call","kunde","subscribe","onSubmit","updateForm","pristine","nachname","value","geschlecht","kategorie","email","update","_UpdateKundeComponent_handleUpdateResult","next","_UpdateKundeComponent_navigateHome","_UpdateKundeComponent_handleFindError","errorMsg","titel","setTitle","err","statuscode","error","cause","JSON","stringify","navigate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\luked\\Documents\\kundeweb\\src\\app\\kunde\\update-kunde\\update-kunde.component.ts","C:\\Users\\luked\\Documents\\kundeweb\\src\\app\\kunde\\update-kunde\\update-kunde.component.html"],"sourcesContent":["import { ActivatedRoute, Router } from '@angular/router'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport { Component, type OnInit } from '@angular/core';\n/* eslint-disable @typescript-eslint/consistent-type-imports */\nimport {\n    FindError,\n    type GeschlechtTyp,\n    type Kunde,\n    KundeReadService,\n    KundeWriteService,\n    UpdateError,\n} from '../shared';\n/* eslint-enable @typescript-eslint/consistent-type-imports */\nimport { HttpErrorResponse, HttpStatusCode } from '@angular/common/http';\nimport { first, tap } from 'rxjs/operators';\nimport { FormGroup } from '@angular/forms';\nimport { Title } from '@angular/platform-browser'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport log from 'loglevel';\n\n/**\n * Komponente für das Tag hs update kunde\n */\n@Component({\n    selector: 'hs-update-kunde',\n    templateUrl: './update-kunde.component.html',\n})\nexport class UpdateKundeComponent implements OnInit {\n    kunde: Kunde | undefined;\n\n    readonly updateForm = new FormGroup({});\n\n    errorMsg: string | undefined;\n\n    // eslint-disable-next-line max-params\n    constructor(\n        private readonly service: KundeWriteService,\n        private readonly readService: KundeReadService,\n        private readonly titleService: Title,\n        private readonly router: Router,\n        private readonly route: ActivatedRoute,\n    ) {\n        log.debug('UpdateKundeComponent.constructor()');\n    }\n\n    ngOnInit() {\n        const id = this.route.snapshot.paramMap.get('id') ?? undefined;\n\n        this.readService\n            .findById(id)\n            .pipe(\n                first(),\n                tap(result => {\n                    this.#setProps(result);\n                    log.debug(\n                        'UpdateKundeComponent.ngOnInit: kunde=',\n                        this.kunde,\n                    );\n                }),\n            )\n            .subscribe();\n    }\n\n    /**\n     * Die aktuellen Stammdaten für das angezeigte Kunde Objekt zurückschreiben\n     * @return false, um das durch den Button Klick ausgelöste Ereignis zu konsumieren\n     */\n    onSubmit() {\n        if (this.updateForm.pristine || this.kunde === undefined) {\n            log.debug('UpdateKundeComponent.onSubmit: keine Aenderung');\n            return;\n        }\n\n        const { nachname } = this.updateForm.value as { nachname: string };\n        const { geschlecht } = this.updateForm.value as {\n            geschlecht: GeschlechtTyp;\n        };\n        const { kategorie } = this.updateForm.value as { kategorie: number };\n        const { email } = this.updateForm.value as { email: string };\n\n        const { kunde, service } = this;\n\n        kunde.nachname = nachname;\n        kunde.geschlecht = geschlecht;\n        kunde.kategorie = kategorie;\n        kunde.email = email;\n        log.debug('UpdateKundeComponent.onSubmit: kunde=', kunde);\n\n        service\n            .update(kunde)\n            .pipe(\n                first(),\n                tap(result => this.#handleUpdateResult(result)),\n            )\n            .subscribe({ next: () => this.#navigateHome() });\n\n        return false;\n    }\n\n    #setProps(result: FindError | Kunde) {\n        if (result instanceof FindError) {\n            this.#handleFindError(result);\n            return;\n        }\n\n        this.kunde = result;\n        this.errorMsg = undefined;\n\n        const titel = `Aktualisieren ${this.kunde.id}`;\n        this.titleService.setTitle(titel);\n    }\n\n    #handleFindError(err: FindError) {\n        const { statuscode } = err;\n        log.debug(\n            'UpdateKundeComponent.#handleFindError: statuscode=',\n            statuscode,\n        );\n\n        this.kunde = undefined;\n\n        switch (statuscode) {\n            case HttpStatusCode.NotFound:\n                this.errorMsg = 'Kein Kunde gefunden';\n                break;\n            case HttpStatusCode.TooManyRequests:\n                this.errorMsg =\n                    'Zu viele Anfragen, bitte versuchen Sie es später erneut';\n                break;\n            case HttpStatusCode.GatewayTimeout:\n                this.errorMsg = 'Ein interner Fehler ist aufgetreten';\n                log.error('Laeuft der Appserver und Port Forwarding?');\n                break;\n            default:\n                this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten';\n                break;\n        }\n    }\n\n    #handleUpdateResult(result: Kunde | UpdateError) {\n        if (!(result instanceof UpdateError)) {\n            return;\n        }\n\n        const { statuscode } = result;\n        log.debug(\n            'UpdateKundeComponent.#handleUpdateResult: statuscode=',\n            statuscode,\n        );\n\n        switch (statuscode) {\n            case HttpStatusCode.UnprocessableEntity: {\n                const { cause } = result;\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n                this.errorMsg =\n                    cause instanceof HttpErrorResponse\n                        ? cause.error\n                        : JSON.stringify(cause);\n                break;\n            }\n            case HttpStatusCode.TooManyRequests:\n                this.errorMsg = 'Zu viele Anfragen, bitte später versuchen';\n                break;\n            case HttpStatusCode.GatewayTimeout:\n                this.errorMsg = 'Interner Fehler';\n                log.error('Laeuft Appserver und Port Forwarding?');\n                break;\n            default:\n                this.errorMsg = 'Ein unbekannter Fehler ist aufgetreten';\n                break;\n        }\n\n        log.debug(\n            'UpdateKundeComponent.#handleUpdateResult: errorMsg=',\n            this.errorMsg,\n        );\n    }\n\n    async #navigateHome() {\n        await this.router.navigate(['/']);\n    }\n}\n","<section class=\"mt-1 ms-1\" *ngIf=\"kunde\">\r\n    <h4>Kunde {{ kunde.id }}:</h4>\r\n  \r\n    <div class=\"mt-2 ms-2\">\r\n      <form [formGroup]=\"updateForm\" role=\"form\" (submit)=\"onSubmit()\">\r\n        <hs-update-nachname [updateForm]=\"updateForm\" [currentValue]=\"kunde.nachname\">\r\n        </hs-update-nachname>\r\n        <hs-update-geschlecht [updateForm]=\"updateForm\" [currentValue]=\"kunde.geschlecht\">\r\n        </hs-update-geschlecht>\r\n        <hs-update-kategorie [updateForm]=\"updateForm\" [currentValue]=\"kunde.kategorie\">\r\n        </hs-update-kategorie>\r\n        <hs-update-email [updateForm]=\"updateForm\" [currentValue]=\"kunde.email\">\r\n        </hs-update-email>\r\n  \r\n        <div class=\"row\">\r\n          <div class=\"col offset-2 gy-3\">\r\n            <button\r\n              type=\"submit\"\r\n              class=\"btn btn-primary\"\r\n              [disabled]=\"updateForm.pristine || updateForm.invalid\"\r\n            >\r\n              <i class=\"material-icons\">check</i>\r\n              <span class=\"ms-1\">Stammdaten aktualisieren</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </section>\r\n  \r\n  <hs-error-message [text]=\"errorMsg\"></hs-error-message>\r\n  "]},"metadata":{},"sourceType":"module"}