{"ast":null,"code":"import { ROLLE_ADMIN } from '../../auth/auth.service'; // eslint-disable-line @typescript-eslint/consistent-type-imports\n\nimport { BehaviorSubject } from 'rxjs';\nimport log from 'loglevel';\nimport { tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../auth/auth.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"./login-logout.component\";\n\nfunction NavComponent_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 6)(1, \"a\", 7)(2, \"i\", 3);\n    i0.ɵɵtext(3, \"menu_book\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 4);\n    i0.ɵɵtext(5, \"Neuer Kunde\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n/**\r\n * Komponente f&uuml;r die Navigationsleiste mit dem Tag &lt;hs-nav&gt;.\r\n */\n\n\nexport class NavComponent {\n  constructor(authService) {\n    this.authService = authService; // Suffix \"$\" wird als \"Finnish Notation\" bezeichnet https://medium.com/@benlesh/observables-and-finnish-notation-df8356ed1c9b\n    // BehaviorSubject stellt den letzten Wert bereit https://stackoverflow.com/questions/41667580/subject-next-not-firing-in-ngoninit\n\n    this.isAdmin$ = new BehaviorSubject(false);\n    log.debug('NavComponent.constructor()');\n  }\n\n  ngOnInit() {\n    if (this.authService.isAdmin) {\n      log.debug('NavComponent.ngOnInit: bereits als admin eingeloggt');\n      this.isAdmin$.next(true);\n    } // beobachten, ob es Informationen zur Rolle \"admin\" gibt\n    // Observable.subscribe() aus RxJS liefert ein Subscription Objekt,\n    // mit dem man den Request auch abbrechen (\"cancel\") kann\n    // https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/operators/subscribe.md\n    // http://stackoverflow.com/questions/34533197/what-is-the-difference-between-rx-observable-subscribe-and-foreach\n    // https://xgrommx.github.io/rx-book/content/observable/observable_instance_methods/subscribe.html\n    // Funktion als Funktionsargument, d.h. Code als Daten uebergeben\n    // Suffix \"$\" wird als \"Finnish Notation\" bezeichnet https://medium.com/@benlesh/observables-and-finnish-notation-df8356ed1c9b\n\n\n    this.authService.rollen$.pipe(tap(rollen => // ein neues Observable vom Typ boolean\n    this.isAdmin$.next(rollen.includes(ROLLE_ADMIN)))) // das Subject von AuthService abonnieren bzw. beobachten\n    .subscribe();\n  }\n\n}\n\nNavComponent.ɵfac = function NavComponent_Factory(t) {\n  return new (t || NavComponent)(i0.ɵɵdirectiveInject(i1.AuthService));\n};\n\nNavComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NavComponent,\n  selectors: [[\"hs-nav\"]],\n  decls: 10,\n  vars: 3,\n  consts: [[1, \"navbar-nav\", \"me-auto\"], [1, \"nav-item\", \"active\"], [\"routerLink\", \"/kunden/suche\", \"routerLinkActive\", \"active\", \"aria-label\", \"Suche Kunden\", 1, \"nav-link\"], [1, \"material-icons\"], [1, \"ms-1\"], [\"class\", \"nav-item\", 4, \"ngIf\"], [1, \"nav-item\"], [\"routerLink\", \"/kunden/create\", \"aria-label\", \"Neuen Kunde anlegen\", 1, \"nav-link\"]],\n  template: function NavComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ul\", 0)(1, \"li\", 1)(2, \"a\", 2)(3, \"i\", 3);\n      i0.ɵɵtext(4, \"search\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"span\", 4);\n      i0.ɵɵtext(6, \"Suche\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(7, NavComponent_li_7_Template, 6, 0, \"li\", 5);\n      i0.ɵɵpipe(8, \"async\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(9, \"hs-login-logout\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(8, 1, ctx.isAdmin$));\n    }\n  },\n  dependencies: [i2.NgIf, i3.RouterLinkWithHref, i3.RouterLinkActive, i4.LoginLogoutComponent, i2.AsyncPipe],\n  encapsulation: 2\n});","map":{"version":3,"mappings":"AAAA,SAAsBA,WAAtB,QAAyC,yBAAzC,C,CAAoE;;AAEpE,SAASC,eAAT,QAAgC,MAAhC;AACA,OAAOC,GAAP,MAAgB,UAAhB;AACA,SAASC,GAAT,QAAoB,gBAApB;;;;;;;;;ACaEC,kCAA8C,CAA9C,EAA8C,GAA9C,EAA8C,CAA9C,EAA8C,CAA9C,EAA8C,GAA9C,EAA8C,CAA9C;AAM8BA;AAASA;AACnCA;AAAmBA;AAAWA;;;ADlBpC;;;;;AAOA,OAAM,MAAOC,YAAP,CAAmB;AAKrBC,cAA6BC,WAA7B,EAAqD;AAAxB,mCAAwB,CAJrD;AACA;;AACA,oBAAW,IAAIN,eAAJ,CAAoB,KAApB,CAAX;AAGIC,OAAG,CAACM,KAAJ,CAAU,4BAAV;AACH;;AAEDC,UAAQ;AACJ,QAAI,KAAKF,WAAL,CAAiBG,OAArB,EAA8B;AAC1BR,SAAG,CAACM,KAAJ,CAAU,qDAAV;AACA,WAAKG,QAAL,CAAcC,IAAd,CAAmB,IAAnB;AACH,KAJG,CAMJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,SAAKL,WAAL,CAAiBM,OAAjB,CACKC,IADL,CAEQX,GAAG,CAAEY,MAAD,IACA;AACA,SAAKJ,QAAL,CAAcC,IAAd,CAAmBG,MAAM,CAACC,QAAP,CAAgBhB,WAAhB,CAAnB,CAFD,CAFX,EAOI;AAPJ,KAQKiB,SARL;AASH;;AAjCoB;;;mBAAZZ,cAAYD;AAAA;;;QAAZC;AAAYa;AAAAC;AAAAC;AAAAC;AAAAC;AAAA;ACTzBlB,oCAA+B,CAA/B,EAA+B,IAA/B,EAA+B,CAA/B,EAA+B,CAA/B,EAA+B,GAA/B,EAA+B,CAA/B,EAA+B,CAA/B,EAA+B,GAA/B,EAA+B,CAA/B;AAQgCA;AAAMA;AAChCA;AAAmBA;AAAKA;AAI5BA;;AAUFA;AAEAA;;;;AAZwBA;AAAAA","names":["ROLLE_ADMIN","BehaviorSubject","log","tap","i0","NavComponent","constructor","authService","debug","ngOnInit","isAdmin","isAdmin$","next","rollen$","pipe","rollen","includes","subscribe","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\luked\\Documents\\kundeweb\\src\\app\\layout\\header\\nav.component.ts","C:\\Users\\luked\\Documents\\kundeweb\\src\\app\\layout\\header\\nav.component.html"],"sourcesContent":["import { AuthService, ROLLE_ADMIN } from '../../auth/auth.service'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport { Component, type OnInit } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport log from 'loglevel';\nimport { tap } from 'rxjs/operators';\n\n/**\n * Komponente f&uuml;r die Navigationsleiste mit dem Tag &lt;hs-nav&gt;.\n */\n@Component({\n    selector: 'hs-nav',\n    templateUrl: './nav.component.html',\n})\nexport class NavComponent implements OnInit {\n    // Suffix \"$\" wird als \"Finnish Notation\" bezeichnet https://medium.com/@benlesh/observables-and-finnish-notation-df8356ed1c9b\n    // BehaviorSubject stellt den letzten Wert bereit https://stackoverflow.com/questions/41667580/subject-next-not-firing-in-ngoninit\n    isAdmin$ = new BehaviorSubject(false);\n\n    constructor(private readonly authService: AuthService) {\n        log.debug('NavComponent.constructor()');\n    }\n\n    ngOnInit() {\n        if (this.authService.isAdmin) {\n            log.debug('NavComponent.ngOnInit: bereits als admin eingeloggt');\n            this.isAdmin$.next(true);\n        }\n\n        // beobachten, ob es Informationen zur Rolle \"admin\" gibt\n        // Observable.subscribe() aus RxJS liefert ein Subscription Objekt,\n        // mit dem man den Request auch abbrechen (\"cancel\") kann\n        // https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/operators/subscribe.md\n        // http://stackoverflow.com/questions/34533197/what-is-the-difference-between-rx-observable-subscribe-and-foreach\n        // https://xgrommx.github.io/rx-book/content/observable/observable_instance_methods/subscribe.html\n        // Funktion als Funktionsargument, d.h. Code als Daten uebergeben\n        // Suffix \"$\" wird als \"Finnish Notation\" bezeichnet https://medium.com/@benlesh/observables-and-finnish-notation-df8356ed1c9b\n\n        this.authService.rollen$\n            .pipe(\n                tap((rollen: string[]) =>\n                    // ein neues Observable vom Typ boolean\n                    this.isAdmin$.next(rollen.includes(ROLLE_ADMIN)),\n                ),\n            )\n            // das Subject von AuthService abonnieren bzw. beobachten\n            .subscribe();\n    }\n}\n","<!--\n    Internationalisierung durch z.B. https://github.com/ocombe/ng2-translate\n-->\n\n<ul class=\"navbar-nav me-auto\">\n  <li class=\"nav-item active\">\n    <a\n      routerLink=\"/kunden/suche\"\n      routerLinkActive=\"active\"\n      class=\"nav-link\"\n      aria-label=\"Suche Kunden\"\n    >\n      <i class=\"material-icons\">search</i>\n      <span class=\"ms-1\">Suche</span>\n    </a>\n  </li>\n\n  <li class=\"nav-item\" *ngIf=\"isAdmin$ | async\">\n    <a\n      routerLink=\"/kunden/create\"\n      class=\"nav-link\"\n      aria-label=\"Neuen Kunde anlegen\"\n    >\n      <i class=\"material-icons\">menu_book</i>\n      <span class=\"ms-1\">Neuer Kunde</span>\n    </a>\n  </li>\n</ul>\n\n<hs-login-logout></hs-login-logout>\n"]},"metadata":{},"sourceType":"module"}