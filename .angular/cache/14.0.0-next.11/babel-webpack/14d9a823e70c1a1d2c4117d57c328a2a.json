{"ast":null,"code":"/* eslint-disable max-classes-per-file */\nimport { ROLLE_ADMIN } from '../../../auth/auth.service'; // eslint-disable-line @typescript-eslint/consistent-type-imports\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\n\nimport { RemoveError } from '../../shared';\nimport { easeIn, easeOut } from '../../../shared';\nimport { first, tap } from 'rxjs/operators';\nimport { NgLocalization } from '@angular/common';\nimport { Subject } from 'rxjs';\nimport log from 'loglevel';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../shared\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../auth/auth.service\";\nimport * as i4 from \"@angular/common\";\n\nfunction GefundeneKundenComponent_div_0_th_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\")(1, \"span\", 8);\n    i0.ɵɵtext(2, \"Spalte f\\u00FCr Entfernen\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_tr_25_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Divers\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_tr_25_span_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Maennlich\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_tr_25_span_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Weiblich\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_tr_25_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"unbekannt\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_tr_25_td_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\")(1, \"span\", 22);\n    i0.ɵɵlistener(\"click\", function GefundeneKundenComponent_div_0_tr_25_td_17_Template_span_click_1_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const kunde_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.onRemove(kunde_r6));\n    });\n    i0.ɵɵelementStart(2, \"i\", 3);\n    i0.ɵɵtext(3, \"delete\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"..\", a1];\n};\n\nconst _c1 = function (a0) {\n  return {\n    kunde: a0\n  };\n};\n\nfunction GefundeneKundenComponent_div_0_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 17);\n    i0.ɵɵlistener(\"click\", function GefundeneKundenComponent_div_0_tr_25_Template_td_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const kunde_r6 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.onClick(kunde_r6));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\", 17);\n    i0.ɵɵlistener(\"click\", function GefundeneKundenComponent_div_0_tr_25_Template_td_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const kunde_r6 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.onClick(kunde_r6));\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\", 17);\n    i0.ɵɵlistener(\"click\", function GefundeneKundenComponent_div_0_tr_25_Template_td_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const kunde_r6 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.onClick(kunde_r6));\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\", 17);\n    i0.ɵɵlistener(\"click\", function GefundeneKundenComponent_div_0_tr_25_Template_td_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const kunde_r6 = restoredCtx.$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.onClick(kunde_r6));\n    });\n    i0.ɵɵelementStart(8, \"span\", 18);\n    i0.ɵɵtemplate(9, GefundeneKundenComponent_div_0_tr_25_span_9_Template, 2, 0, \"span\", 19);\n    i0.ɵɵtemplate(10, GefundeneKundenComponent_div_0_tr_25_span_10_Template, 2, 0, \"span\", 19);\n    i0.ɵɵtemplate(11, GefundeneKundenComponent_div_0_tr_25_span_11_Template, 2, 0, \"span\", 19);\n    i0.ɵɵtemplate(12, GefundeneKundenComponent_div_0_tr_25_span_12_Template, 2, 0, \"span\", 20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"td\")(14, \"a\", 21)(15, \"i\", 3);\n    i0.ɵɵtext(16, \"search\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(17, GefundeneKundenComponent_div_0_tr_25_td_17_Template, 4, 0, \"td\", 9);\n    i0.ɵɵpipe(18, \"async\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const kunde_r6 = ctx.$implicit;\n    const idx_r7 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"@easeOut\", \"in\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(idx_r7 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(kunde_r6.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(kunde_r6.nachname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngSwitch\", kunde_r6.geschlecht);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"D\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"M\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"W\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(13, _c0, kunde_r6.id))(\"state\", i0.ɵɵpureFunction1(15, _c1, kunde_r6));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isAdmin || i0.ɵɵpipeBind1(18, 11, ctx_r2.isAdmin$));\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_ng_template_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Es gibt kein Kunde \");\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_ng_template_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Es gibt ein Kunde \");\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_ng_template_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵtextInterpolate1(\" Es gibt \", ctx_r5.kunden.length, \" Kunden \");\n  }\n}\n\nfunction GefundeneKundenComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"i\", 3);\n    i0.ɵɵtext(3, \"folder_open\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"span\", 4);\n    i0.ɵɵtext(5, \"Gefundene Kunden\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 5)(7, \"table\", 6)(8, \"thead\", 7)(9, \"th\");\n    i0.ɵɵtext(10, \"Nr.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"ID\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Nachname\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"th\");\n    i0.ɵɵtext(16, \"Geschlecht\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"th\");\n    i0.ɵɵtext(18, \"Email\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"th\")(20, \"span\", 8);\n    i0.ɵɵtext(21, \"Spalte f\\u00FCr Details\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(22, GefundeneKundenComponent_div_0_th_22_Template, 3, 0, \"th\", 9);\n    i0.ɵɵpipe(23, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"tbody\");\n    i0.ɵɵtemplate(25, GefundeneKundenComponent_div_0_tr_25_Template, 19, 17, \"tr\", 10);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"div\", 11)(27, \"div\")(28, \"i\", 3);\n    i0.ɵɵtext(29, \"info\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"span\", 12);\n    i0.ɵɵtemplate(31, GefundeneKundenComponent_div_0_ng_template_31_Template, 1, 0, \"ng-template\", 13);\n    i0.ɵɵtemplate(32, GefundeneKundenComponent_div_0_ng_template_32_Template, 1, 0, \"ng-template\", 14);\n    i0.ɵɵtemplate(33, GefundeneKundenComponent_div_0_ng_template_33_Template, 1, 1, \"ng-template\", 15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(34, \"div\")(35, \"i\", 3);\n    i0.ɵɵtext(36, \"info\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"span\", 16);\n    i0.ɵɵtext(38, \" Zur Anzeige der JSON-Datens\\u00E4tze in gefundene-kunen.html am Dateiende den Kommentar beim Tag <pre> entfernen \");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"@easeIn\", \"in\");\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAdmin || i0.ɵɵpipeBind1(23, 5, ctx_r0.isAdmin$));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.kunden)(\"ngForTrackBy\", ctx_r0.trackBy);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngPlural\", ctx_r0.kunden.length);\n  }\n}\n/**\r\n * Komponente für das Tag hs gefundene Kunden\r\n */\n\n\nexport class GefundeneKundenComponent {\n  // eslint-disable-next-line max-params\n  constructor(service, router, authService, writeService) {\n    this.service = service;\n    this.router = router;\n    this.authService = authService;\n    this.writeService = writeService;\n    this.kunden = [];\n    this.isAdmin$ = new Subject();\n    log.debug('GefundeneKundenComponent.constructor()');\n  }\n\n  ngOnInit() {\n    log.debug('GefundeneKundenComponent.ngOnInit()');\n    this.isAdmin = this.authService.isAdmin;\n    this.authService.rollen$.pipe(first(), tap(rollen => this.isAdmin$.next(rollen.includes(ROLLE_ADMIN)))).subscribe();\n  }\n  /**\r\n   * Den ausgewählten, bzw. angeklickten Kunde in der Detailseite anzeigen\r\n   * @param kunde Der ausgewählte Kunde\r\n   */\n\n\n  onClick(kunde) {\n    log.debug('GefundeneKundenComponent.onClick: kunde=', kunde);\n    const state = {\n      kunde\n    };\n    return this.router.navigate([`/kunden/${kunde.id}`], {\n      state\n    });\n  }\n  /**\r\n   * Den ausgewählten bzw. angeklickten Kunde löschen\r\n   * @param kunde Der ausgewählte Kunde\r\n   */\n\n\n  onRemove(kunde) {\n    log.debug('GefundeneKundenComponent.onRemove: kunde=', kunde);\n    return this.writeService.remove(kunde).pipe(first(), tap(result => {\n      if (result instanceof RemoveError) {\n        log.debug('GefundeneKundenComponent.onRemove: statusCode=', result.statuscode);\n        return;\n      }\n\n      this.kunden = this.kunden.filter(k => k.id !== kunde.id);\n    })).subscribe();\n  }\n\n  trackBy(_index, kunde) {\n    return kunde.id;\n  }\n\n}\n\nGefundeneKundenComponent.ɵfac = function GefundeneKundenComponent_Factory(t) {\n  return new (t || GefundeneKundenComponent)(i0.ɵɵdirectiveInject(i1.KundeReadService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AuthService), i0.ɵɵdirectiveInject(i1.KundeWriteService));\n};\n\nGefundeneKundenComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GefundeneKundenComponent,\n  selectors: [[\"hs-gefundene-kunden\"]],\n  inputs: {\n    kunden: \"kunden\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"card\", \"aria-label\", \"Gefundene Kunden\", 4, \"ngIf\"], [\"aria-label\", \"Gefundene Kunden\", 1, \"card\"], [1, \"card-header\"], [1, \"material-icons\"], [1, \"ms-1\", \"fw-bold\"], [1, \"card-body\"], [1, \"table\", \"table-striped\", \"table-hover\", \"table-responsive\"], [1, \"thead-default\"], [1, \"visually-hidden\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"card-footer\"], [1, \"ms-1\", 3, \"ngPlural\"], [\"ngPluralCase\", \"=0\"], [\"ngPluralCase\", \"=1\"], [\"ngPluralCase\", \"other\"], [1, \"ms-1\"], [3, \"click\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [4, \"ngSwitchDefault\"], [\"title\", \"Details anzeigen\", 3, \"routerLink\", \"state\"], [\"title\", \"Entfernen\", 3, \"click\"]],\n  template: function GefundeneKundenComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, GefundeneKundenComponent_div_0_Template, 39, 7, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.kunden.length);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i4.NgSwitch, i4.NgSwitchCase, i4.NgSwitchDefault, i4.NgPlural, i4.NgPluralCase, i2.RouterLinkWithHref, i4.AsyncPipe],\n  encapsulation: 2,\n  data: {\n    animation: [easeIn, easeOut]\n  }\n});\nexport class AnzahlLocalization extends NgLocalization {\n  getPluralCategory(count) {\n    return count === 1 ? 'single' : 'multi';\n  }\n\n}","map":{"version":3,"mappings":"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","names":["ROLLE_ADMIN","RemoveError","easeIn","easeOut","first","tap","NgLocalization","Subject","log","i0","ctx_r0","GefundeneKundenComponent","constructor","service","router","authService","writeService","debug","ngOnInit","isAdmin","rollen$","pipe","rollen","isAdmin$","next","includes","subscribe","onClick","kunde","state","navigate","id","onRemove","remove","result","statuscode","kunden","filter","k","trackBy","_index","selectors","inputs","decls","vars","consts","template","AnzahlLocalization","getPluralCategory","count"],"sourceRoot":"","sources":["C:\\Users\\luked\\Documents\\kundeweb\\src\\app\\kunde\\suche-kunden\\gefundene-kunden\\gefundene-kunden.component.ts","C:\\Users\\luked\\Documents\\kundeweb\\src\\app\\kunde\\suche-kunden\\gefundene-kunden\\gefundene-kunden.component.html"],"sourcesContent":["/* eslint-disable max-classes-per-file */\n\nimport { AuthService, ROLLE_ADMIN } from '../../../auth/auth.service'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport { Component, Input, type OnInit } from '@angular/core';\n// eslint-disable-next-line @typescript-eslint/consistent-type-imports\nimport {\n    type Kunde,\n    KundeReadService,\n    KundeWriteService,\n    RemoveError,\n} from '../../shared';\nimport { easeIn, easeOut } from '../../../shared';\nimport { first, tap } from 'rxjs/operators';\nimport { NgLocalization } from '@angular/common';\nimport { Router } from '@angular/router'; // eslint-disable-line @typescript-eslint/consistent-type-imports\nimport { Subject } from 'rxjs';\nimport log from 'loglevel';\n\n/**\n * Komponente für das Tag hs gefundene Kunden\n */\n@Component({\n    selector: 'hs-gefundene-kunden',\n    templateUrl: './gefundene-kunden.component.html',\n    animations: [easeIn, easeOut],\n})\nexport class GefundeneKundenComponent implements OnInit {\n    @Input()\n    kunden: Kunde[] = [];\n\n    isAdmin!: boolean;\n\n    isAdmin$ = new Subject<boolean>();\n\n    // eslint-disable-next-line max-params\n    constructor(\n        private readonly service: KundeReadService,\n        private readonly router: Router,\n        private readonly authService: AuthService,\n        private readonly writeService: KundeWriteService,\n    ) {\n        log.debug('GefundeneKundenComponent.constructor()');\n    }\n\n    ngOnInit() {\n        log.debug('GefundeneKundenComponent.ngOnInit()');\n        this.isAdmin = this.authService.isAdmin;\n\n        this.authService.rollen$\n            .pipe(\n                first(),\n                tap((rollen: string[]) =>\n                    this.isAdmin$.next(rollen.includes(ROLLE_ADMIN)),\n                ),\n            )\n            .subscribe();\n    }\n\n    /**\n     * Den ausgewählten, bzw. angeklickten Kunde in der Detailseite anzeigen\n     * @param kunde Der ausgewählte Kunde\n     */\n    onClick(kunde: Kunde) {\n        log.debug('GefundeneKundenComponent.onClick: kunde=', kunde);\n\n        const state = { kunde };\n        return this.router.navigate([`/kunden/${kunde.id}`], { state });\n    }\n\n    /**\n     * Den ausgewählten bzw. angeklickten Kunde löschen\n     * @param kunde Der ausgewählte Kunde\n     */\n    onRemove(kunde: Kunde) {\n        log.debug('GefundeneKundenComponent.onRemove: kunde=', kunde);\n\n        return this.writeService\n            .remove(kunde)\n            .pipe(\n                first(),\n                tap(result => {\n                    if (result instanceof RemoveError) {\n                        log.debug(\n                            'GefundeneKundenComponent.onRemove: statusCode=',\n                            result.statuscode,\n                        );\n                        return;\n                    }\n\n                    this.kunden = this.kunden.filter(k => k.id !== kunde.id);\n                }),\n            )\n            .subscribe();\n    }\n\n    trackBy(_index: number, kunde: Kunde) {\n        return kunde.id;\n    }\n}\n\nexport class AnzahlLocalization extends NgLocalization {\n    getPluralCategory(count: number) {\n        return count === 1 ? 'single' : 'multi';\n    }\n}\n\n/* eslint-enable max-classes-per-file */\n","<div class=\"card\" aria-label=\"Gefundene Kunden\" *ngIf=\"kunden.length\">\r\n    <div class=\"card-header\">\r\n      <i class=\"material-icons\">folder_open</i>\r\n      <span class=\"ms-1 fw-bold\">Gefundene Kunden</span>\r\n    </div>\r\n    <div class=\"card-body\">\r\n      <table\r\n        class=\"table table-striped table-hover table-responsive\"\r\n        [@easeIn]=\"'in'\"\r\n      >\r\n        <thead class=\"thead-default\">\r\n          <th>Nr.</th>\r\n          <th>ID</th>\r\n          <th>Nachname</th>\r\n          <th>Geschlecht</th>\r\n          <th>Email</th>\r\n          <th>\r\n            <span class=\"visually-hidden\">Spalte f&uuml;r Details</span>\r\n          </th>\r\n          <th *ngIf=\"isAdmin || (isAdmin$ | async)\">\r\n            <span class=\"visually-hidden\">Spalte f&uuml;r Entfernen</span>\r\n          </th>\r\n        </thead>\r\n        <tbody>\r\n          <tr\r\n            *ngFor=\"let kunde of kunden; index as idx; trackBy: trackBy\"\r\n            [@easeOut]=\"'in'\"\r\n          >\r\n            <td (click)=\"onClick(kunde)\">{{ idx + 1 }}</td>\r\n            <td (click)=\"onClick(kunde)\">{{ kunde.id }}</td>\r\n            <td (click)=\"onClick(kunde)\">{{ kunde.nachname }}</td>\r\n            <td (click)=\"onClick(kunde)\">\r\n              <span [ngSwitch]=\"kunde.geschlecht\">\r\n                <span *ngSwitchCase=\"'D'\">Divers</span>\r\n                <span *ngSwitchCase=\"'M'\">Maennlich</span>\r\n                <span *ngSwitchCase=\"'W'\">Weiblich</span>\r\n                <span *ngSwitchDefault>unbekannt</span>\r\n              </span>\r\n            </td>\r\n            <td>\r\n              <a\r\n                [routerLink]=\"['..', kunde.id]\"\r\n                [state]=\"{ kunde: kunde }\"\r\n                title=\"Details anzeigen\"\r\n              >\r\n                <i class=\"material-icons\">search</i>\r\n              </a>\r\n            </td>\r\n            <td *ngIf=\"isAdmin || (isAdmin$ | async)\">\r\n              <span (click)=\"onRemove(kunde)\" title=\"Entfernen\">\r\n                <i class=\"material-icons\">delete</i>\r\n              </span>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <div class=\"card-footer\">\r\n      <div>\r\n        <i class=\"material-icons\">info</i>\r\n        <span class=\"ms-1\" [ngPlural]=\"kunden.length\">\r\n          <ng-template ngPluralCase=\"=0\"> Es gibt kein Kunde </ng-template>\r\n          <ng-template ngPluralCase=\"=1\"> Es gibt ein Kunde </ng-template>\r\n          <ng-template ngPluralCase=\"other\">\r\n            Es gibt {{ kunden.length }} Kunden\r\n          </ng-template>\r\n        </span>\r\n      </div>\r\n  \r\n      <div>\r\n        <i class=\"material-icons\">info</i>\r\n        <span class=\"ms-1\">\r\n          Zur Anzeige der JSON-Datens&auml;tze in gefundene-kunen.html am\r\n          Dateiende den Kommentar beim Tag &lt;pre&gt; entfernen\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>"]},"metadata":{},"sourceType":"module"}